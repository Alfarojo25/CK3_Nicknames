#########################################
# AC Nickname System - On Actions
# Handles yearly pulse and nickname selection
#########################################
# Hook into yearly pulse for playable characters
yearly_playable_pulse = {
	on_actions = {
		ac_nickname_yearly_check
	}
}

# Main entry point: check if character qualifies for nickname
ac_nickname_yearly_check = {
	trigger = {
		# Must not have nickname already
		has_any_nickname = no
		# Must be old enough (16+)
		ac_age_adult_trigger = yes
		# Must have at least one qualifying skill range (9+)
		OR = {
			ac_skill_is_bad_trigger = yes
			ac_skill_is_medium_trigger = yes
			ac_skill_is_glorious_trigger = yes
		}
		# Must have at least one title
		OR = {
			is_landed = yes
			is_councillor = yes
		}
	}
	random_on_action = {
		# Base chance: 20% per year
		chance_to_happen = 20
		# No additional modifiers - flat 20% for all eligible characters
		# If check passes, proceed to master nickname assignment
		100 = ac_nickname_master_assignment
	}
}

# Master assignment: single event that uses dynamic effect system
ac_nickname_master_assignment = {
	events = {
		ac_nickname.1		# Master nickname assignment event
	}
}
