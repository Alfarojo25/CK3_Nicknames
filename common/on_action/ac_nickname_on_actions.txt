#########################################
# AC Nickname System - On Actions
# Handles yearly pulse and nickname selection
#########################################
# Hook into yearly pulse for playable characters
yearly_playable_pulse = {
	on_actions = {
		ac_nickname_yearly_check
	}
}

# Main entry point: check if character qualifies for nickname
ac_nickname_yearly_check = {
	trigger = {
		# Must not have nickname already
		has_any_nickname = no
		# Must be old enough (16+)
		ac_age_adult_trigger = yes
		# Must have at least one qualifying skill range (9+)
		OR = {
			ac_skill_is_bad_trigger = yes
			ac_skill_is_medium_trigger = yes
			ac_skill_is_glorious_trigger = yes
		}
		# Must have at least one title
		OR = {
			is_landed = yes
			is_councillor = yes
		}
		# Must pass the frequency probability check (based on game rule)
		ac_nickname_frequency_check_trigger = yes
	}
	effect = {
		# If all checks pass, proceed to master nickname assignment
		trigger_event = ac_nickname.1
	}
}
